<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="nico 0.5.0">
    <meta name="theme" content="autumn 0.1">
    <title>离线H5App开发指南 | AM WIKI</title>
    <link rel="stylesheet" href="../static/1140.css" />
    <link rel="stylesheet" href="../static/wiki.css" />
    <link rel="stylesheet" href="../static/syntax.css" />
  </head>
<body>
  <div class="wrap">
    <div class="main">
      <div class="header">
        <div class="slogan row">
            <img src="https://i.alipayobjects.com/i/ecmng/png/201406/2m8Ebk4eZh.png" class="slogan-logo" alt=""/> <span>Alipay Mobile</span>
        <span class="search">
           <!--<input type="text" id="search" placeholder="搜点东西...">-->
        </span>

        </div>
          <div class="header-nav">
                <div class="navigation row-n">
                    
<ul class="nav">
    <li>
        <a  archiveId = "about" href="../about/about.html">
        关于AM </a>
        
    </li>
    
    <li>
        <a  archiveId = "amj" href="../amj/about.html">
        AMJ </a>
        
        <ul class="nav-sub">
              <li>
                  <a href="../amj/about.html">关于AMJ</a>
              </li>
            
              <li>
                  <a href="../amj/amj接口文档.html">接口文档</a>
              </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "amui" href="../amui/about.html">
        AMUI </a>
        
        <ul class="nav-sub">
              <li>
                  <a href="../amui/about.html">使用文档</a>
              </li>
            
              <li>
                  <a href="../amui/think.html">建设想法</a>
              </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "amb" href="../amb/about.html">
        AMB </a>
        
        <ul class="nav-sub">
              <li>
                  <a href="../amb/about.html">关于AMB</a>
              </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "amt" href="../amt/about.html">
        AMT </a>
        
    </li>
    
    <li>
        <a  class="active"  archiveId = "h5container" href="about.html">
        H5Container </a>
        
        <ul class="nav-sub">
              <li>
                  <a href="about.html">关于H5Container</a>
              </li>
            
              <li>
                  <a href="doc.html">接口文档</a>
              </li>
            
              <li>
                  <a href="alipayjsbridge.html">AlipayJSBridge</a>
              </li>
            
              <li>
                  <a href="h5appdemo.html">离线类H5App开发指南</a>
              </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "sample" href="../sample">
        样例库 </a>
        
    </li>
    
    <li>
        <a  archiveId = "bookmarks" href="../../../../../../../AM/">
        书签 </a>
        
        <ul class="nav-sub">
              <li>
                  <a href="http://caniuse.com/../">Can I use</a>
              </li>
            
              <li>
                  <a href="http://www.base64-image.de/../">base64 Image</a>
              </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "wiki" href="../../../../../../../AMWD/">
        知识库 </a>
        
    </li>
    
</ul>

                </div>
          </div>
      </div>



      
<div class="row mar">
    <div class="threecol meta">
        <ul class="sub-nav">
    </ul>
    </div>
    
 
    <div class="ninecol content">
          <div class="document">
          <div class="post-header">
       <h2 class="document-title">离线H5App开发指南</h2>
            <div class="post-meta"><span>仈爪</span> / <time datetime="2014-04-21">2014-04-21</time></div>
          </div>
            <div class="entry-content">
              <h2 id="前言">前言</h2><p>该指南旨在解决基于H5Container开发的H5App离线包的整体流程，如有细节问题需要咨询请联系<code>@仈爪</code>、<code>@双十</code></p>
<p>以下内容的demo工程可直接从gitlab获取:<a href="http://gitlab.alibaba-inc.com/h5app/h5app-demo"><a href="http://gitlab.alibaba-inc.com/h5app/h5app-demo">http://gitlab.alibaba-inc.com/h5app/h5app-demo</a></a></p>
<h2 id="环境搭建">环境搭建</h2><p>H5App本身暂时不需要特殊的开发环境，满足常规web站点的本地开发即可。但最终打包为amr包的打包工具是基于Node.js，因此需要先在开发环境安装好一个Node.js</p>
<p>Node.js安装指南：
<a href="http://sealmemory.blogspot.com/2013/12/install-node-js-in-windows-mac-os-x-linux.html"><a href="http://sealmemory.blogspot.com/2013/12/install-node-js-in-windows-mac-os-x-linux.html">http://sealmemory.blogspot.com/2013/12/install-node-js-in-windows-mac-os-x-linux.html</a></a></p>
<h2 id="前期准备">前期准备</h2><ol>
<li><p><code>应用中心接入</code>
如果您开发的H5App是属于支付宝钱包应用中心的。那么首先你应该先向应用中心PD申请一个应用ID(appId)。<br/>
相关申请和管理文档请参考：<a href="http://doc.alipay.net/pages/viewpage.action?pageId=74090565">钱包8.1应用中心接入应用操作文档</a></p>
</li>
<li><p><code>下载amr打包工具</code> 可以用gitlab下载打包工具，地址为：<a href="http://gitlab.alibaba-inc.com/h5app/h5app-demo/tree/master/tools"><a href="http://gitlab.alibaba-inc.com/h5app/h5app-demo/tree/master/tools">http://gitlab.alibaba-inc.com/h5app/h5app-demo/tree/master/tools</a></a></p>
</li>
</ol>
<h2 id="项目构建">项目构建</h2><p><em>目前构建一个新的H5App项目，暂时还需要手动方式，后续将提供自动构建工具，敬请期待。</em></p>
<p>以一个appId为20000127，名称为&#39;H5App-demo&#39;，版本号为&#39;1.0.0.0&#39;的项目为例。</p>
<p>1.在文件系统中新建一个名为H5App-demo的空文件夹，然后以此为根目录，新增一个www文件夹，之后的web开发源码都应该存于此文件夹下。</p>
<p>2.www文件夹内新建一个Manifest.xml文件，该文件用于打包信息管理以及客户端升级信息管理。范例内容如下：<br/></p>
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;package&gt;
    &lt;!--业务包appId --&gt;
    &lt;uid&gt;20000127&lt;/uid&gt;

    &lt;!--业务包名称 --&gt;
    &lt;name&gt;H5App-demo&lt;/name&gt;

    &lt;!--业务包版本 --&gt;
    &lt;version&gt;1.0.0.0&lt;/version&gt;

    &lt;!--业务包介绍 --&gt;
    &lt;descriptor&gt;H5App离线业务包打包样例&lt;/descriptor&gt;
&lt;/package&gt;</pre><p>3.在www目录下新增index.html文件，js、css等web开发源文件</p>
<p>4.将下载好的<code>amr打包工具</code>内的<code>tools</code>文件夹复制到项目根目录下</p>
<p>最终项目文件系统目录应如下：</p>
<pre>/H5App-demo
--/tools
----/...
--/www
----/css
------base.css
----/js
------helloWorld.js
----index.html
----Manifest.xml</pre><h2 id="项目打包">项目打包</h2><p>假设之前的H5App-demo项目的根目录磁盘路径为：<code>/Users/haibinzhb/Project/alipayProject/H5App-demo</code> <br/>
假设当前版本号为<code>1.0.0.0</code>，appId为<code>20000127</code></p>
<p>运行命令行，打包步骤如下：</p>
<pre>/* 切换路径至项目文件系统根目录 */
cd /Users/haibinzhb/Project/alipayProject/H5App-demo

/* 运行打包工具package.js */
node tools/package.js dev</pre><p>运行以上命令后，打包工具将在项目根目录自动生成dist、package两个文件夹，其中dist文件夹内容可无视，<code>最终生成的amr离线包将自动保存至package文件夹内</code>，amr文件名称为<code>20000127-1.0.0.0_dev.amr</code>。</p>
<p>amr包文件名内分别包含了此项目的appId、版本号、运行环境标识。appId和版本号会在Manifest.xml文件中自动获取。</p>
<p>其中运行环境标识&#39;dev&#39;字符串，可以通过运行打包工具的node命令时自定义。例如当执行<code>node tools/package.js pre</code> 命令时，生成的amr包文件名将会是<code>20000127-1.0.0.0_pre.amr</code>。</p>
<p>之后的项目版本迭代过程中如果需要升级版本号，请直接修改Manifest.xml文件内的版本号信息。</p>
<h2 id="部署上传">部署上传</h2><p>应用中心后台部署相关资料请参考<a href="http://doc.alipay.net/pages/viewpage.action?pageId=74090565">钱包8.1应用中心接入应用操作文档</a>。</p>
<p>额外需要重点关注<code>《扩展信息》</code>这个配置规则。
如H5App-demo应用，它的最基本的扩展信息应为<code>“{&quot;launchParams&quot;:{&quot;url&quot;:&quot;/index.html&quot;}}”</code>
其中url参数代表了默认首页文件相对于项目文件系统中的www文件夹的绝对路径。</p>

            </div>

    <!-- Duoshuo Comment BEGIN -->
      <div id="comment">
      <div class="ds-thread" data-thread-key="h5appdemo" data-title="离线H5App开发指南" data-author-key="1"></div>
      </div>
      <script type="text/javascript">
      var duoshuoQuery = {short_name:"amwd"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- Duoshuo Comment END -->

    </div>
    </div>
</div>

 
 
 </div>
 </div>
         <!--<div class="logo">-->
          <!--&lt;!&ndash;<div class="logo-inner"></div>&ndash;&gt;-->
        <!--</div>-->
  <div class="footer">
      <div class="grid-990 sitelink fn-clear" coor="sitelink" role="contentinfo">
          <ul class="ui-link fn-clear">
              <!-- XT:支付宝首页/默认频道/支付宝新首页开始:www.alipay.com/i/indexb.vm -->                    <li class="ui-link-item"><a href="http://ab.alipay.com/i/index.htm" target="_blank" title="关于支付宝" seed="grid990-link" smartracker="on">关于支付宝</a></li>
              <li class="ui-link-item"><a href="http://blog.alipay.com/" target="_blank" title="官方博客" seed="grid990-linkT1" smartracker="on">官方博客</a></li>
              <li class="ui-link-item"><a href="http://job.alipay.com/index.php" target="_blank" title="诚征英才" seed="grid990-linkT2" smartracker="on">诚征英才</a></li>
              <li class="ui-link-item"><a href="https://open.alipay.com/index.htm" target="_blank" title="开放平台" seed="grid990-linkT3" smartracker="on">开放平台</a></li>
              <li class="ui-link-item"><a href="http://ab.alipay.com/i/lianxi.htm" target="_blank" title="联系我们" seed="grid990-linkT4" smartracker="on">联系我们</a></li>
              <li class="ui-link-item"><a href="http://fun.alipay.com/sitemap/index.htm" target="_blank" title="网站地图" seed="grid990-linkT5" smartracker="on">网站地图</a></li>
              <li class="ui-link-item"><a href="http://global.alipay.com/ospay/home.htm" target="_blank" title="International Business" seed="grid990-International-Business" smartracker="on">International Business</a></li>
              <li class="ui-link-item ui-link-item-last"><a href="http://ab.alipay.com/i/jieshao.htm#en" target="_blank" title="About Alipay" seed="grid990-About-Alipay" smartracker="on">About Alipay</a></li>
              <!-- XT:支付宝首页/默认频道/支付宝新首页结束:www.alipay.com/i/indexb.vm -->        </ul>
          <ul class="ui-link fn-clear">
              <!-- XT:支付宝首页/默认频道/支付宝新首页开始:www.alipay.com/i/indexb.vm -->          <li class="ui-link-item"><a href="http://page.1688.com/shtml/about/ali_group1.shtml" target="_blank" title="阿里巴巴集团" seed="grid990-linkT7" smartracker="on">阿里巴巴集团</a></li>
              <li class="ui-link-item"><a href="http://www.alibaba.com/" target="_blank" title="阿里巴巴国际站" seed="grid990-linkT8" smartracker="on">阿里巴巴国际站</a></li>
              <li class="ui-link-item"><a href="http://www.1688.com/" target="_blank" title="阿里巴巴中国站" seed="grid990-linkT9" smartracker="on">阿里巴巴中国站</a></li>
              <li class="ui-link-item"><a href="http://www.aliexpress.com/" target="_blank" title="全球速卖通" seed="grid990-linkT10" smartracker="on">全球速卖通</a></li>
              <li class="ui-link-item"><a href="http://www.taobao.com/" target="_blank" title="淘宝网" seed="grid990-linkT11" smartracker="on">淘宝网</a></li>
              <li class="ui-link-item"><a href="http://www.tmall.com/" target="_blank" title="天猫" seed="grid990-linkT12" smartracker="on">天猫</a></li>
              <li class="ui-link-item"><a href="http://ju.taobao.com" target="_blank" title="聚划算" seed="grid990-linkT13" smartracker="on">聚划算</a></li>
              <li class="ui-link-item"><a href="http://www.etao.com/?tbpm=t" target="_blank" title="一淘" seed="grid990-linkT14" smartracker="on">一淘</a></li>
              <li class="ui-link-item"><a href="http://www.alimama.com/index.htm" target="_blank" title="阿里妈妈" seed="grid990-linkT15" smartracker="on">阿里妈妈</a></li>
              <li class="ui-link-item"><a href="http://trip.taobao.com/" target="_blank" title="淘宝旅行" seed="grid990-linkT16" smartracker="on">淘宝旅行</a></li>
              <li class="ui-link-item"><a href="http://www.xiami.com/" target="_blank" title="虾米" seed="grid990-linkT17" smartracker="on">虾米</a></li>
              <li class="ui-link-item"><a href="http://www.aliyun.com/" target="_blank" title="阿里云计算" seed="grid990-linkT18" smartracker="on">阿里云计算</a></li>
              <li class="ui-link-item"><a href="http://www.yunos.com/" target="_blank" title="云OS" seed="grid990-linkT19" smartracker="on">云OS</a></li>
              <li class="ui-link-item"><a href="http://www.net.cn/" target="_blank" title="万网" seed="grid990-linkT20" smartracker="on">万网</a></li>
              <li class="ui-link-item"><a href="https://www.alipay.com/" target="_blank" title="支付宝" seed="grid990-linkT21" smartracker="on">支付宝</a></li>
              <li class="ui-link-item ui-link-item-last"><a href="https://www.laiwang.com/" target="_blank" title="来往" seed="grid990-linkT22" smartracker="on">来往</a></li>
              <!-- XT:支付宝首页/默认频道/支付宝新首页结束:www.alipay.com/i/indexb.vm -->        </ul>
          <ul class="ui-link ui-link-bottom fn-clear">
              <li class="ui-link-item ui-link-item-last">支付宝版权所有 2004-2014 <a href="http://fun.alipay.com/certificate/jyxkz.htm" target="_blank" seed="grid990-linkT6" smartracker="on">ICP证: 浙B2-20120045</a></li>
          </ul>

      </div>
  </div>
</body>
    <script src="http://static.alipayobjects.com/seajs/1.2.1/sea.js" data-main="../static/global.js">
    </script>
    <script>
        seajs.config({
            alias: {
                "$": 'jquery/jquery/1.7.2/jquery'
            }
        });
        seajs.use(['arale/autocomplete/1.2.3/autocomplete','$'], function(AutoComplete,$) {
          $('.logo').click(function (e) {
              $('body,html').animate({
                scrollTop: 0
          }, 500);
            e.preventDefault();
          });
            new AutoComplete({
                trigger: '#search',
                filter:"stringMatch",
                dataSource: [
                 "../about/about.html",
                 "../amb/about.html",
                 "../amj/about.html",
                 "../amj/amj接口文档.html",
                 "../amt/about.html",
                 "../amui/about.html",
                 "../amui/",
                 "../amui/old.html",
                 "../amui/think.html",
                 "about.html",
                 "alipayjsbridge.html",
                 "doc.html",
                 "h5appdemo.html",
                 "../sample/about.html",
                ]
            }).render().on('itemSelect',function  (data) {
              window.location = data.matchKey;
            });
        });

    </script>

</html>